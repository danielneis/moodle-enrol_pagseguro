var brandName="",ghash="";require(["jquery"],function(a){a(document).on("submit","#pagseguro_boleto_form",function(b){if(boletoValidateFields()){a("#pagseguro_boleto_form input[name=sender_hash]").val(ghash);var c=new URLSearchParams(window.location.search);a("#boleto_courseid").val(c.get("id"))}else{b.preventDefault()}});a(document).on("click","#cc_submit",function(){if(ccValidateFields()){var b=a("input[name=ccnumber]").val().replace(/\s/g,""),c=a("input[name=cvv]").val(),d=a("input[name=ccvalid]").val().split("/");PagSeguroDirectPayment.createCardToken({cardNumber:b,brand:brandName,cvv:c,expirationMonth:d[0],expirationYear:d[1],success:function success(b){a("#cc_token").val(b.card.token);var c=new URLSearchParams(window.location.search);a("#cc_courseid").val(c.get("id"));a("#cc_instval").val(a("#installments").find(":selected").data("installment-value"));a("#pagseguro_cc_form").submit()},error:function error(){},complete:function complete(){}})}});a(document).on("focusout","#billingpostcode",function(){var b=a("#billingpostcode").val().replace(/\D/g,"");if(""!=b){if(/^[0-9]{8}$/.test(b)){a("#billingstreet").val("...");a("#billingdistrict").val("...");a("#billingcity").val("...");a("#billingstate").val("...");a("#ibge").val("...");a.getJSON("https://viacep.com.br/ws/"+b+"/json/?callback=?",function(b){if(!("erro"in b)){a("#billingstreet").val(b.logradouro);a("#billingdistrict").val(b.bairro);a("#billingcity").val(b.localidade);a("#billingstate").val(b.uf);a("#ibge").val(b.ibge)}else{limpa_formul치rio_cep();alert("CEP n\xE3o encontrado.")}})}else{limpa_formul치rio_cep();alert("Formato de CEP inv\xE1lido.")}}else{limpa_formul치rio_cep()}})});function loadDoc(a,b){require(["core/ajax"],function(c){var d=c.call([{methodname:"enrol_pagseguro_get_session",args:{courseP:b}}]);d[0].done(function(b){setPagueSeguroWSSessionId(b.stoken,a,b.courseP)}).fail(function(){})})}function setPagueSeguroWSSessionId(a,b,c){PagSeguroDirectPayment.setSessionId(a);PagSeguroDirectPayment.getPaymentMethods({success:function success(){require(["jquery","core/ajax","core/templates","core/notification"],function(d,e,f,g){var h=e.call([{methodname:"enrol_pagseguro_get_forms",args:{sessionId:a,courseId:b,courseP:c}}]);h[0].done(function(a){f.render("enrol_pagseguro/checkout_form",JSON.parse(a)).done(function(a,b){d("#modal-return").html(a);f.runTemplateJS(b);PagSeguroDirectPayment.onSenderHashReady(function(a){if("error"==a.status){return!1}var b=a.senderHash;ghash=b;createMasks()})}).fail(g.exception)}).fail(function(){})})},error:function error(a){document.getElementById("return").innerHTML=JSON.stringify(a)},complete:function complete(){}})}function createMasks(){require(["jquery","enrol_pagseguro/jqmask"],function(a){a(".input-phone").mask("(00) 0000-0000",{onKeyPress:function onKeyPress(b,c,d,e){var f=["(00) 0000-00009","(00) 0 0000-0000"],g=14<b.length?f[1]:f[0];a(".input-phone").mask(g,e)}});a(".input-cpfcnpj").mask("000.000.000-009",{onKeyPress:function onKeyPress(b,c,d,e){var f=["000.000.000-009","00.000.000/0000-00"],g=14<b.length?f[1]:f[0];a(".input-cpfcnpj").mask(g,e)}});a(".input-ccnumber").mask("0000 0000 0000 0000");a(".input-ccvalid").mask("00/0000");a(".input-cvv").mask("000");a(".input-cep").mask("00000-000")})}function limpa_formul치rio_cep(){require(["jquery"],function(a){a("#billingstreet").val("");a("#billingdistrict").val("");a("#billingcity").val("");a("#billingstate").val("");a("#ibge").val("")})}function checkBrand(a,b){var c=a.value.replace(/\s/g,"");if(6<=c.length){PagSeguroDirectPayment.getBrand({cardBin:+c.substring(0,6),success:function success(a){require(["jquery"],function(c){brandName=a.brand.name;c("#cardbrand").html("<img src=\"https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/42x20/"+a.brand.name+".png\" />");installments(brandName,b)})},error:function error(){},complete:function complete(){}})}}function installments(a,b){var c=Number.parseFloat(b).toFixed(2);PagSeguroDirectPayment.getInstallments({amount:c,brand:a,success:function success(b){require(["jquery"],function(c){if(!b.error){var d="<select id=\"installments\" name=\"ccinstallments\">";b.installments[a].forEach(function(a){d+="<option value=\""+a.quantity;d+="\" data-installment-value=\""+a.installmentAmount.toFixed(2)+"\" >";d+=a.quantity+"x de "+a.installmentAmount.toFixed(2);d+="</option>"});d+="</select>"}c("#card-installments").html("<span>"+d+"</span>")})},error:function error(){},complete:function complete(){}})}function ccValidateFields(){var a=!0;require(["jquery"],function(b){if(!b("#ccEmail").val().trim()){a=!1;b("#ccEmail-error").html("Favor preencher email corretamente")}else{b("#ccEmail-error").html("")}if(!b("#ccPhone").val().trim()){a=!1;b("#ccPhone-error").html("Favor preencher telefone corretamente")}else{b("#ccPhone-error").html("")}if(!b("#ccCPFCNPJ").val().trim()){a=!1;b("#ccCPFCNPJ-error").html("Favor preencher CPF/CNPJ corretamente")}else{b("#ccCPFCNPJ-error").html("")}if(!b("#ccName").val().trim()){a=!1;b("#ccName-error").html("Favor preencher Nome corretamente")}else{b("#ccName-error").html("")}if(!b("#ccNumber").val().trim()){a=!1;b("#ccNumber-error").html("Favor preencher N\xFAmero do cart\xE3o corretamente")}else{b("#ccNumber-error").html("")}if(!b("#ccvalid").val().trim()){a=!1;b("#ccvalid-error").html("Favor preencher Validade do cart\xE3o corretamente")}else{b("#ccvalid-error").html("")}if(!b("#cvv").val().trim()){a=!1;b("#cvv-error").html("Favor preencher CVV corretamente")}else{b("#cvv-error").html("")}if(!b("#billingpostcode").val().trim()){a=!1;b("#billingpostcode-error").html("Favor preencher cep corretamente")}else{b("#billingpostcode-error").html("")}if(!b("#billingstreet").val().trim()){a=!1;b("#billingstreet-error").html("Favor preencher campo corretamente")}else{b("#billingstreet-error").html("")}if(!b("#billingstate").val().trim()){a=!1;b("#billingstate-error").html("Favor preencher estado corretamente")}else{b("#billingstate-error").html("")}if(!b("#billingdistrict").val().trim()){a=!1;b("#billingdistrict-error").html("Favor preencher bairro corretamente")}else{b("#billingdistrict-error").html("")}if(!b("#billingcity").val().trim()){a=!1;b("#billingcity-error").html("Favor preencher cidade corretamente")}else{b("#billingcity-error").html("")}});return a}function boletoValidateFields(){var a=!0;require(["jquery"],function(b){if(!b("#boleto_nome").val().trim()){a=!1;b("#boleto_nome-error").html("Favor preencher o nome corretamente")}else{b("#boleto_nome-error").html("")}if(!b("#boleto_email").val().trim()){a=!1;b("#boleto_email-error").html("Favor preencher email corretamente")}else{b("#boleto_email-error").html("")}if(!b("#boleto_phone").val().trim()){a=!1;b("#boleto_phone-error").html("Favor preencher telefone corretamente")}else{b("#boleto_phone-error").html("")}if(!b("#boleto_doc").val().trim()){a=!1;b("#boleto_doc-error").html("Favor preencher CPF/CNPJ corretamente")}else{b("#boleto_doc-error").html("")}});return a}
//# sourceMappingURL=transparent-checkout.min.js.map
